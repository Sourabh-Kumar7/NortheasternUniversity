/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package ui.professor;

import java.awt.Dimension;
import java.awt.Image;
import java.awt.Toolkit;
import javax.swing.ImageIcon;
import static model.DataManager.professorMap;
import model.Professor;
import model.User;
import ui.AccSecurityJFrame;
import ui.ViewUserDetailsJFrame;

/**
 *
 * @author sourabhkumar
 */
public class ProfessorPortalJFrame extends javax.swing.JFrame {

    /**
     * Creates new form ProfessorPortalJFrame
     */
    User u;
    Professor p;
    public ProfessorPortalJFrame(User u) {
        this.u = u;
        this.p = professorMap.get(u.getId());
        initComponents();
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();

        // Calculate the position to be at the top right corner
        int x = screenSize.width - getWidth();
        int y = 0;

        setLocation(x, y);
        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE); // Set close operation
        initProfessorPortalView();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        btnCreateCourse = new javax.swing.JButton();
        btnManageCourse = new javax.swing.JButton();
        btnUserDetail = new javax.swing.JButton();
        btnAccSecurity = new javax.swing.JButton();
        btnStudentEng = new javax.swing.JButton();
        btnViewFeedback = new javax.swing.JButton();
        btnEarnMng = new javax.swing.JButton();
        lblPicture = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("Professor Portal");

        btnCreateCourse.setText("Create Course");
        btnCreateCourse.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCreateCourseActionPerformed(evt);
            }
        });

        btnManageCourse.setText("Manage Course");
        btnManageCourse.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnManageCourseActionPerformed(evt);
            }
        });

        btnUserDetail.setText("User Details");
        btnUserDetail.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnUserDetailActionPerformed(evt);
            }
        });

        btnAccSecurity.setText("Account Security");
        btnAccSecurity.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAccSecurityActionPerformed(evt);
            }
        });

        btnStudentEng.setText("Student Engagement");
        btnStudentEng.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnStudentEngActionPerformed(evt);
            }
        });

        btnViewFeedback.setText("View Feedback");
        btnViewFeedback.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnViewFeedbackActionPerformed(evt);
            }
        });

        btnEarnMng.setText("Earning Management");
        btnEarnMng.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEarnMngActionPerformed(evt);
            }
        });

        lblPicture.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblPicture.setText("No Pic");
        lblPicture.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(77, 77, 77)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(btnStudentEng)
                    .addComponent(btnViewFeedback)
                    .addComponent(btnUserDetail)
                    .addComponent(btnCreateCourse, javax.swing.GroupLayout.PREFERRED_SIZE, 188, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 55, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(btnEarnMng)
                        .addComponent(btnManageCourse)
                        .addComponent(btnAccSecurity))
                    .addComponent(lblPicture, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 154, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(101, 101, 101))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 168, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(214, 214, 214))
        );

        layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {btnAccSecurity, btnCreateCourse, btnEarnMng, btnManageCourse, btnStudentEng, btnUserDetail, btnViewFeedback});

        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(24, 24, 24)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 66, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(65, 65, 65)
                        .addComponent(btnUserDetail))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(18, 18, 18)
                        .addComponent(lblPicture, javax.swing.GroupLayout.PREFERRED_SIZE, 121, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 43, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnManageCourse)
                    .addComponent(btnCreateCourse, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(53, 53, 53)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnEarnMng)
                    .addComponent(btnStudentEng))
                .addGap(53, 53, 53)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnViewFeedback)
                    .addComponent(btnAccSecurity))
                .addGap(117, 117, 117))
        );

        layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {btnAccSecurity, btnCreateCourse, btnEarnMng, btnManageCourse, btnStudentEng, btnUserDetail, btnViewFeedback});

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnUserDetailActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnUserDetailActionPerformed
        // TODO add your handling code here:
       dispose();
       ViewUserDetailsJFrame viewUserDetail = new ViewUserDetailsJFrame(this.u);
       viewUserDetail.setVisible(true);
    }//GEN-LAST:event_btnUserDetailActionPerformed

    private void btnCreateCourseActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCreateCourseActionPerformed
        // TODO add your handling code here:
        dispose();
        CreateCourseJFrame createCourse = new CreateCourseJFrame(this.p, this.u);
        createCourse.setVisible(true);
    }//GEN-LAST:event_btnCreateCourseActionPerformed

    private void btnManageCourseActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnManageCourseActionPerformed
        // TODO add your handling code here:
        dispose();
        ManageCourseJFrame manageCourse = new ManageCourseJFrame(this.p, this.u);
        manageCourse.setVisible(true);
        
    }//GEN-LAST:event_btnManageCourseActionPerformed

    private void btnStudentEngActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnStudentEngActionPerformed
        // TODO add your handling code here:
        dispose();
        StudentEngJFrame studentEngagement = new StudentEngJFrame(this.p, this.u);
        studentEngagement.setVisible(true);
    }//GEN-LAST:event_btnStudentEngActionPerformed

    private void btnAccSecurityActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAccSecurityActionPerformed
        // TODO add your handling code here:
        dispose();
        AccSecurityJFrame accSec = new AccSecurityJFrame(this.u);
        accSec.setVisible(true);
    }//GEN-LAST:event_btnAccSecurityActionPerformed

    private void btnEarnMngActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEarnMngActionPerformed
        // TODO add your handling code here:
        dispose();
        EarningMngJFrame earnMng = new EarningMngJFrame(this.p, this.u);
        earnMng.setVisible(true);
    }//GEN-LAST:event_btnEarnMngActionPerformed

    private void btnViewFeedbackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnViewFeedbackActionPerformed
        // TODO add your handling code here:
        dispose();
        ViewFeedbackJFrame viewFeedback = new ViewFeedbackJFrame(this.p, this.u);
        viewFeedback.setVisible(true);
    }//GEN-LAST:event_btnViewFeedbackActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAccSecurity;
    private javax.swing.JButton btnCreateCourse;
    private javax.swing.JButton btnEarnMng;
    private javax.swing.JButton btnManageCourse;
    private javax.swing.JButton btnStudentEng;
    private javax.swing.JButton btnUserDetail;
    private javax.swing.JButton btnViewFeedback;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel lblPicture;
    // End of variables declaration//GEN-END:variables

    private void initProfessorPortalView() {
        ImageIcon imageIcon;
        String picPath = u.getPicPath();

        if (picPath != null && !picPath.isEmpty()) {
            // Load the provided picture
            try {
                imageIcon = new ImageIcon(picPath);
            } catch (Exception ex) {
                imageIcon = null; // Handle image loading error
            }
        } else {
            if (u.getGender() == null) {
                imageIcon = new ImageIcon("data/images/no_pic.jpeg");
            } else             // Load a default image based on gender
                imageIcon = switch (u.getGender()) {
                case "Female" -> new ImageIcon("data/images/no_pic_female.jpeg");
                case "Male" -> new ImageIcon("data/images/no_pic_male.jpeg");
                default -> new ImageIcon("data/images/no_pic.jpeg");
            };
        }
        
        if (imageIcon != null) {
            Image image = imageIcon.getImage();
            int labelWidth = lblPicture.getWidth();
            int labelHeight = lblPicture.getHeight();
            double scaleX = (double) labelWidth / image.getWidth(null);
            double scaleY = (double) labelHeight / image.getHeight(null);
            Image scaledImage = image.getScaledInstance((int) (image.getWidth(null) * scaleX), (int) (image.getHeight(null) * scaleY), Image.SCALE_SMOOTH);
            ImageIcon scaledImageIcon = new ImageIcon(scaledImage);
            lblPicture.setText(null);
            lblPicture.setIcon(scaledImageIcon);
        } else {
            // Handle the case where an image couldn't be loaded
            lblPicture.setIcon(null);
        }
    }
}
